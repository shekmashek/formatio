CREATE OR REPLACE VIEW v_besoins_stagiaires AS SELECT 
besoin.id as besoin_id,
d.nom_domaine,
f.nom_formation,
f.domaine_id,
f.id as formation_id,
besoin.stagiaire_id ,
besoin.objectif,
besoin.date_previsionnelle as date_prev,
besoin.organisme,
besoin.statut,
besoin.type,
besoin.reponse_stagiaire,
besoin.arbitrage,
stg.entreprise_id,
stg.matricule,
stg.nom_stagiaire,
stg.prenom_stagiaire,
stg.genre_stagiaire,
stg.fonction_stagiaire,
stg.poste_emp,
stg.mail_stagiaire,
stg.telephone_stagiaire,
stg.user_id,
stg.prioriter_emp,
stg.service_id,
stg.nom_service,
stg.branche_id,
stg.departement_entreprises_id,
stg.nom_departement,
plan.id as anneePlan_id,
plan.AnneePlan,
plan.debut_rec,
plan.fin_rec
FROM 
	domaines d JOIN formations f ON d.id = f.domaine_id
	JOIN besoin_stagiaire besoin ON besoin.domaines_id = d.id AND besoin.thematique_id = f.id
    JOIN plan_formation_valide plan ON plan.id = besoin.anneePlan_id AND plan.entreprise_id = besoin.entreprise_id
    LEFT JOIN stagiaires stg ON stg.id = besoin.stagiaire_id AND besoin.entreprise_id = stg.entreprise_id;


En modifiant la table besoin_stagiaire,ajoutez une autre colonne reponse_stagiaire
ALTER TABLE besoin_stagiaire ADD reponse_stagiaire VARCHAR(3) NOT NULL ;
ALTER TABLE besoin_stagiaire ADD arbitrage VARCHAR(3) NOT NULL DEFAULT 0;